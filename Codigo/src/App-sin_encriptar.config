<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <configSections>
    <section name="customConfigurationSection" type="CTECH.Configuracion.Business.CustomConfigurationSection, CTECH.Configuracion" />
  </configSections>
  <appSettings>
    <add key="LogSeverity" value="Debug" />
  </appSettings>
  <customConfigurationSection>
    <querys>
	  <add key="AdminGeneralJournal.createGJ" value="INSERT GJ (ID,GJ_DATE,DESCRIPTION,POSTING_DATE,TOTAL_DR_AMOUNT,TOTAL_CR_AMOUNT,SELL_RATE,BUY_RATE,ENTITY_ID,CREATE_DATE,USER_ID,CURRENCY_ID,POST_ALL_TRACKING,POST_AS_NATIVE,USER_EXCH_RATE,POSTING_CANDIDATE) VALUES ('{0}',CONVERT(DATETIME,'{1}',102),'{2}',CONVERT(DATETIME,'{3}',102),{4},{5},{6},{7},'{8}',CONVERT(DATETIME,'{9}',102),'{10}','{11}','{12}','{13}','{14}','{15}')"/>
	  <add key="AdminGeneralJournal.createGJ_CURR" value="INSERT GJ_CURR (GJ_ID,CURRENCY_ID,AMOUNT,SELL_RATE,BUY_RATE) VALUES ('{0}','{1}',{2},{3},{4})"/>
	  <add key="AdminGeneralJournal.createGJ_DIST" value="INSERT GJ_DIST (GJ_ID,DIST_NO,ENTRY_NO,AMOUNT,AMOUNT_TYPE,GL_ACCOUNT_ID,NATIVE_AMOUNT,POSTING_DATE,POSTING_STATUS,CREATE_DATE,ENTITY_ID,CURRENCY_ID,NATIVE) VALUES ('{0}','{1}',{2},{3},'{4}','{5}',{6},CONVERT(DATETIME,'{7}',102),'{8}',CONVERT(DATETIME,'{9}',102),'{10}','{11}','{12}')"/>
	  <add key="AdminGeneralJournal.createGJ_LINE" value="INSERT GJ_LINE (GJ_ID,LINE_NO,GL_ACCOUNT_ID,DEBIT_AMOUNT,CREDIT_AMOUNT) VALUES ('{0}',{1},'{2}',{3},{4})"/>
	  <add key="AdminGeneralJournal.createVMXCONTROLPOLIZA" value="INSERT VMXCONTROLPOLIZA (NO_TRANSACCION,CUENTA,MONTO,FECHA_PERIODO,FECHA_TRANSACCION,FECHA_CREACION,USUARIO,TIPO_OPERACION) VALUES ('{0}','{1}',{2},CONVERT(DATETIME,'{3}',102),CONVERT(DATETIME,'{4}',102),CONVERT(DATETIME,'{5}',102),'{6}','{7}')"/>
	  <add key="AdminGeneralJournal.createVMX_CONTOLPOLIZA_LINE_CXC" value="INSERT VMX_CONTOLPOLIZA_LINE (NO_TRANSACCION,BANK_ACCOUNT_ID,CHECK_ID,VAT_AMOUNT,SELL_RATE,MONTO,CUENTA,DESCRIPCION,CUENTA_TRASLADO,DESCRIPTION,TIPO_OPERACION,CUSTOMER_ID,PERDIDA_GANACIA,IVA_DEPOSITO) VALUES ('{0}','{1}','{2}','{3}',{4},{5},'{6}','{7}','{8}',(select top 1 descripcion from VMX_DIOTCUENTAS where Cuenta = '{9}'),'{10}','{11}',{12},{13})"/>
	  <add key="AdminGeneralJournal.createVMX_CONTOLPOLIZA_LINE_CXP" value="INSERT VMX_CONTOLPOLIZA_LINE (NO_TRANSACCION,BANK_ACCOUNT_ID,CONTROL_NO,VAT_AMOUNT,SELL_RATE,MONTO,CUENTA,DESCRIPCION,CUENTA_TRASLADO,DESCRIPTION,TIPO_OPERACION,PERDIDA_GANACIA,IVA_DEPOSITO) VALUES ('{0}','{1}','{2}','{3}',{4},{5},'{6}','{7}','{8}','{9}','{10}',{11},{12})"/>
	  <add key="AdminGeneralJournal.getRoundedAccount" value="SELECT GLI.GL_ACCOUNT_ID FROM GL_INTERFACE AS GL JOIN GL_INTERFACE_ACCT AS GLI ON GL.ID = GLI.INTERFACE_ID WHERE ID = 'ROUNDING'"/>
	  <add key="AdminGJ.getNext_GJ_ID" value="SELECT ISNULL(ALPHA_PREFIX,'') AS ALPHA_PREFIX, NEXT_NUMBER,DECIMAL_PLACES, ISNULL(ALPHA_SUFFIX,'') AS ALPHA_SUFFIX FROM NEXT_NUMBER_GEN WHERE TABLE_NAME='GJ' AND COLUMN_NAME='ID'"/>
	  <add key="AdminGJ.setNext_GJ_ID" value="UPDATE NEXT_NUMBER_GEN SET NEXT_NUMBER={0} WHERE TABLE_NAME='GJ' AND COLUMN_NAME='ID'"/>
	  <add key="APPLICATION_GLOBAL.obtenerDatos" value="SELECT SYSTEM_CURRENCY_ID FROM APPLICATION_GLOBAL"/>
	  <add key="ConsultaCXC.conciliados" value="SELECT VMX_IVA_CXC_02.BANK_ACCOUNT_ID AS Banco ,VMX_IVA_CXC_02.CHECK_ID AS [No. Cheque] ,VMX_IVA_CXC_02.VAT_GL_ACCT_ID AS [Cuenta] ,VMX_IVACUENTASCXC.DESCRIPCION AS [Descripción] ,VMX_IVACUENTASCXC.TRASLADO AS [Cuenta Traslado] ,TC_FACTURA AS [Tipo Cambio] ,CASE WHEN SUM(VMX_IVA_CXC_02.IVA_MXN_TRASLADAR_FACT) = 0.01 THEN 0 WHEN SUM(VMX_IVA_CXC_02.IVA_MXN_TRASLADAR_FACT) = -0.01 THEN 0 ELSE SUM(VMX_IVA_CXC_02.IVA_MXN_TRASLADAR_FACT)END AS IVA_MXN_TRASLADAR_FACT ,'{0}' AS Fecha ,VMX_IVA_CXC_02.COD_CLIENTE AS Cliente FROM ACCOUNT, VMX_IVA_CXC_02, VMX_IVACUENTASCXC WHERE VMX_IVACUENTASCXC.Traslado = ACCOUNT.ID AND VMX_IVACUENTASCXC.Cuenta = VMX_IVA_CXC_02.VAT_GL_ACCT_ID AND VMX_IVACUENTASCXC.Estado = 'True' AND VMX_IVA_CXC_02.Anio_Conc = {1} AND VMX_IVA_CXC_02.Mes_conc = {2} AND VMX_IVA_CXC_02.CHECK_ID  NOT IN (SELECT CXC.CHECK_ID FROM ACCOUNT AS AC, VMX_IVA_CXC_02 AS CXC, VMX_IVACUENTASCXC AS CTAS WHERE CTAS.Traslado = AC.ID AND CTAS.Cuenta = CXC.VAT_GL_ACCT_ID AND CTAS.Estado = 'True' AND CXC.Anio_Conc = {1} AND CXC.Mes_conc = {2} GROUP BY CXC.BANK_ACCOUNT_ID,CXC.CHECK_ID,CXC.VAT_GL_ACCT_ID   HAVING CASE WHEN SUM(CXC.IVA_MXN_TRASLADAR_FACT) = 0.01 THEN 0 WHEN SUM(CXC.IVA_MXN_TRASLADAR_FACT) = -0.01 THEN 0 ELSE SUM(CXC.IVA_MXN_TRASLADAR_FACT) END &lt; 0) GROUP BY VMX_IVA_CXC_02.BANK_ACCOUNT_ID ,VMX_IVA_CXC_02.CHECK_ID ,VMX_IVA_CXC_02.VAT_GL_ACCT_ID ,VMX_IVACUENTASCXC.Descripcion ,TC_FACTURA ,VMX_IVACUENTASCXC.Traslado ,ACCOUNT.DESCRIPTION ,VMX_IVA_CXC_02.Cod_Cliente"/>
	  <add key="ConsultaCXC.conciliadosNegativos" value="SELECT VMX_IVA_CXC_02.BANK_ACCOUNT_ID AS Banco ,VMX_IVA_CXC_02.CHECK_ID AS [No. Cheque] ,VMX_IVA_CXC_02.VAT_GL_ACCT_ID AS [Cuenta] ,VMX_IVACUENTASCXC.DESCRIPCION AS Descripción ,VMX_IVACUENTASCXC.TRASLADO AS [Cuenta Traslado] ,TC_FACTURA AS [Tipo Cambio] ,CASE WHEN SUM(VMX_IVA_CXC_02.IVA_MXN_TRASLADAR_FACT) = 0.01 THEN 0 WHEN SUM(VMX_IVA_CXC_02.IVA_MXN_TRASLADAR_FACT) = -0.01 THEN 0 ELSE SUM(VMX_IVA_CXC_02.IVA_MXN_TRASLADAR_FACT)END AS IVA_MXN_TRASLADAR_FACT ,'{0}' AS Fecha ,VMX_IVA_CXC_02.COD_CLIENTE AS Cliente FROM ACCOUNT, VMX_IVA_CXC_02, VMX_IVACUENTASCXC WHERE VMX_IVACUENTASCXC.Traslado = ACCOUNT.ID AND VMX_IVACUENTASCXC.Cuenta = VMX_IVA_CXC_02.VAT_GL_ACCT_ID AND VMX_IVACUENTASCXC.Estado = 'True' AND VMX_IVA_CXC_02.Anio_Conc = {1} AND VMX_IVA_CXC_02.Mes_conc = {2} AND VMX_IVA_CXC_02.CHECK_ID  IN (SELECT CXC.CHECK_ID FROM ACCOUNT AS AC, VMX_IVA_CXC_02 AS CXC, VMX_IVACUENTASCXC AS CTAS WHERE CTAS.Traslado = AC.ID AND CTAS.Cuenta = CXC.VAT_GL_ACCT_ID AND CTAS.Estado = 'True' AND CXC.Anio_Conc = {1} AND CXC.Mes_conc = {2} GROUP BY CXC.BANK_ACCOUNT_ID,CXC.CHECK_ID,CXC.VAT_GL_ACCT_ID        HAVING CASE WHEN SUM(CXC.IVA_MXN_TRASLADAR_FACT) = 0.01 THEN 0 WHEN SUM(CXC.IVA_MXN_TRASLADAR_FACT) = -0.01 THEN 0 ELSE SUM(CXC.IVA_MXN_TRASLADAR_FACT) END &lt; 0) GROUP BY VMX_IVA_CXC_02.BANK_ACCOUNT_ID ,VMX_IVA_CXC_02.CHECK_ID ,VMX_IVA_CXC_02.VAT_GL_ACCT_ID ,VMX_IVACUENTASCXC.Descripcion ,TC_FACTURA ,VMX_IVACUENTASCXC.Traslado ,ACCOUNT.DESCRIPTION ,VMX_IVA_CXC_02.Cod_Cliente"/>
	
	  <add key="segunda" value="SELECT VICXC_02.SITE_ID, VICXC_02.BANK_ACCOUNT_ID AS Banco, VICXC_02.CHECK_ID AS [No. Cheque], VICXC_02.VAT_GL_ACCT_ID AS Cuenta, VICXC.Descripcion AS Descripción, VICXC.Traslado AS [Cuenta Traslado], VICXC_02.TC_FACTURA AS [Tipo Cambio], CASE WHEN SUM(VICXC_02.IVA_MXN_TRASLADAR_FACT) = 0.01 THEN 0 WHEN SUM(VICXC_02.IVA_MXN_TRASLADAR_FACT) = - 0.01 THEN 0 ELSE SUM(VICXC_02.IVA_MXN_TRASLADAR_FACT) END AS IVA_MXN_TRASLADAR_FACT, '{0}' AS Fecha, VICXC_02.Cod_Cliente AS Cliente,CU.NAME AS Nombre FROM ACCOUNT AS A INNER JOIN VMX_IVACUENTASCXC AS VICXC ON A.ID = VICXC.Traslado INNER JOIN VMX_IVA_CXC_02 AS VICXC_02 ON VICXC.Cuenta = VICXC_02.VAT_GL_ACCT_ID inner join CUSTOMER CU ON CU.ID =  VICXC_02.Cod_Cliente WHERE (VICXC.Estado = 'True') AND (VICXC_02.Anio_Conc = {1}) AND (VICXC_02.Mes_Conc = {2}) AND (VICXC_02.CHECK_ID IN (SELECT CXC.CHECK_ID FROM ACCOUNT AS AC INNER JOIN VMX_IVACUENTASCXC AS CTAS ON AC.ID = CTAS.Traslado INNER JOIN VMX_IVA_CXC_02 AS CXC ON CTAS.Cuenta = CXC.VAT_GL_ACCT_ID inner join CUSTOMER CU ON CU.ID =  VICXC_02.Cod_Cliente WHERE (CTAS.Estado = 'True') AND (CXC.Anio_Conc = {1}) AND (CXC.Mes_Conc = {2}) AND (CXC.SITE_ID = '{3}') AND VICXC_02.Cod_Cliente = CXC.Cod_Cliente GROUP BY CXC.BANK_ACCOUNT_ID, CXC.CHECK_ID, CXC.VAT_GL_ACCT_ID HAVING (CASE WHEN SUM(CXC.IVA_MXN_TRASLADAR_FACT) = 0.01 THEN 0 WHEN SUM(CXC.IVA_MXN_TRASLADAR_FACT) = - 0.01 THEN 0 ELSE SUM(CXC.IVA_MXN_TRASLADAR_FACT) END < 0))) AND (VICXC_02.SITE_ID = '{3}') GROUP BY VICXC_02.BANK_ACCOUNT_ID, VICXC_02.CHECK_ID, VICXC_02.VAT_GL_ACCT_ID, VICXC.Descripcion, VICXC_02.TC_FACTURA, VICXC.Traslado, A.DESCRIPTION, VICXC_02.Cod_Cliente,CU.NAME, VICXC_02.SITE_ID"/>
		
	  <add key="ConsultaCXC.noConciliados" value="SELECT VMX_IVA_CXC_02.BANK_ACCOUNT_ID AS Banco ,VMX_IVA_CXC_02.CHECK_ID AS [No. Cheque] ,VMX_IVA_CXC_02.VAT_GL_ACCT_ID AS [Cuenta] ,VMX_IVACUENTASCXC.DESCRIPCION AS Descripción ,VMX_IVACUENTASCXC.TRASLADO AS [Cuenta Traslado] ,TC_FACTURA AS [Tipo Cambio] ,CASE WHEN SUM(VMX_IVA_CXC_02.IVA_MXN_TRASLADAR_FACT) = 0.01 THEN 0 WHEN SUM(VMX_IVA_CXC_02.IVA_MXN_TRASLADAR_FACT) = -0.01 THEN 0 ELSE SUM(VMX_IVA_CXC_02.IVA_MXN_TRASLADAR_FACT)END AS IVA_MXN_TRASLADAR_FACT ,'{0}' AS Fecha ,VMX_IVA_CXC_02.COD_CLIENTE AS Cliente FROM ACCOUNT, VMX_IVA_CXC_02, VMX_IVACUENTASCXC WHERE VMX_IVACUENTASCXC.Traslado = ACCOUNT.ID AND VMX_IVACUENTASCXC.Cuenta = VMX_IVA_CXC_02.VAT_GL_ACCT_ID AND VMX_IVACUENTASCXC.Estado = 'True' AND VMX_IVA_CXC_02.ANIO_POSTEO = {1} AND VMX_IVA_CXC_02.MES_POSTEO = {2} AND VMX_IVA_CXC_02.CHECK_ID  NOT IN (SELECT CXC.CHECK_ID FROM ACCOUNT AS AC, VMX_IVA_CXC_02 AS CXC, VMX_IVACUENTASCXC AS CTAS WHERE CTAS.Traslado = AC.ID AND CTAS.Cuenta = CXC.VAT_GL_ACCT_ID AND CTAS.Estado = 'True' AND CXC.ANIO_POSTEO = {1} AND CXC.MES_POSTEO = {2} GROUP BY CXC.BANK_ACCOUNT_ID,CXC.CHECK_ID,CXC.VAT_GL_ACCT_ID            HAVING CASE WHEN SUM(CXC.IVA_MXN_TRASLADAR_FACT) = 0.01 THEN 0 WHEN SUM(CXC.IVA_MXN_TRASLADAR_FACT) = -0.01 THEN 0 ELSE SUM(CXC.IVA_MXN_TRASLADAR_FACT) END &lt; 0) GROUP BY VMX_IVA_CXC_02.BANK_ACCOUNT_ID ,VMX_IVA_CXC_02.CHECK_ID ,VMX_IVA_CXC_02.VAT_GL_ACCT_ID ,VMX_IVACUENTASCXC.Descripcion ,TC_FACTURA ,VMX_IVACUENTASCXC.Traslado ,ACCOUNT.DESCRIPTION ,VMX_IVA_CXC_02.Cod_Cliente"/>
	  <add key="ConsultaCXC.noConciliadosNegativos" value="SELECT VMX_IVA_CXC_02.BANK_ACCOUNT_ID AS Banco ,VMX_IVA_CXC_02.CHECK_ID AS [No. Cheque] ,VMX_IVA_CXC_02.VAT_GL_ACCT_ID AS [Cuenta] ,VMX_IVACUENTASCXC.DESCRIPCION AS Descripción ,VMX_IVACUENTASCXC.TRASLADO AS [Cuenta Traslado] ,TC_FACTURA AS [Tipo Cambio] ,CASE WHEN SUM(VMX_IVA_CXC_02.IVA_MXN_TRASLADAR_FACT) = 0.01 THEN 0 WHEN SUM(VMX_IVA_CXC_02.IVA_MXN_TRASLADAR_FACT) = -0.01 THEN 0 ELSE SUM(VMX_IVA_CXC_02.IVA_MXN_TRASLADAR_FACT)END AS IVA_MXN_TRASLADAR_FACT ,'{0}' AS Fecha ,VMX_IVA_CXC_02.COD_CLIENTE AS Cliente FROM ACCOUNT, VMX_IVA_CXC_02, VMX_IVACUENTASCXC WHERE VMX_IVACUENTASCXC.Traslado = ACCOUNT.ID AND VMX_IVACUENTASCXC.Cuenta = VMX_IVA_CXC_02.VAT_GL_ACCT_ID AND VMX_IVACUENTASCXC.Estado = 'True' AND VMX_IVA_CXC_02.ANIO_POSTEO = {1} AND VMX_IVA_CXC_02.MES_POSTEO = {2} AND VMX_IVA_CXC_02.CHECK_ID  IN (SELECT CXC.CHECK_ID FROM ACCOUNT AS AC, VMX_IVA_CXC_02 AS CXC, VMX_IVACUENTASCXC AS CTAS WHERE CTAS.Traslado = AC.ID AND CTAS.Cuenta = CXC.VAT_GL_ACCT_ID AND CTAS.Estado = 'True' AND CXC.ANIO_POSTEO = {1} AND CXC.MES_POSTEO = {2} GROUP BY CXC.BANK_ACCOUNT_ID,CXC.CHECK_ID,CXC.VAT_GL_ACCT_ID           HAVING CASE WHEN SUM(CXC.IVA_MXN_TRASLADAR_FACT) = 0.01 THEN 0 WHEN SUM(CXC.IVA_MXN_TRASLADAR_FACT) = -0.01 THEN 0 ELSE SUM(CXC.IVA_MXN_TRASLADAR_FACT) END &lt; 0) GROUP BY VMX_IVA_CXC_02.BANK_ACCOUNT_ID ,VMX_IVA_CXC_02.CHECK_ID ,VMX_IVA_CXC_02.VAT_GL_ACCT_ID ,VMX_IVACUENTASCXC.Descripcion ,TC_FACTURA ,VMX_IVACUENTASCXC.Traslado ,ACCOUNT.DESCRIPTION ,VMX_IVA_CXC_02.Cod_Cliente"/>
	  <add key="ConsultaCXC.procesados" value="SELECT DISTINCT P.NO_TRANSACCION, PL.BANK_ACCOUNT_ID, PL.CHECK_ID, PL.CUSTOMER_ID, PL.CUENTA, PL.DESCRIPCION, PL.CUENTA_TRASLADO, PL.MONTO,PL.IVA_DEPOSITO, PL.PERDIDA_GANACIA, P.FECHA_PERIODO FROM VMXCONTROLPOLIZA AS P JOIN VMX_CONTOLPOLIZA_LINE AS PL ON P.NO_TRANSACCION = PL.NO_TRANSACCION WHERE P.TIPO_OPERACION = 'CXC' AND P.NO_TRANSACCION IN({0}) ORDER BY PL.BANK_ACCOUNT_ID,PL.CHECK_ID"/>
	  <add key="ConsultaCXP.conciliados" value="SELECT A.BANK_ACCOUNT_ID AS Banco ,A.CONTROL_NO AS [No. Control] ,A.VAT_GL_ACCT_ID AS [Cuenta] ,B.DESCRIPCION AS Descripción ,B.TRASLADO AS [Cuenta Traslado] ,A.TC_FACTURA AS [Tipo Cambio] ,CASE WHEN SUM(A.IVA_TRASLADO_MXN_FACT) = 0.01 THEN 0 WHEN SUM(A.IVA_TRASLADO_MXN_FACT) = -0.01 THEN 0 ELSE SUM(A.IVA_TRASLADO_MXN_FACT)  END AS Monto ,'{0}' AS Fecha FROM VMX_IVA_TRASL_CXP_02 AS a,VMX_DIOTCUENTAS AS b WHERE b.Cuenta =  a.VAT_GL_ACCT_ID  AND b.Estado = 'True'  AND a.ANIO_CONCILIACION = {1} AND a.MES_CONCILIACION = {2} AND a.CONTROL_NO NOT IN(SELECT a.CONTROL_NO FROM VMX_IVA_TRASL_CXP_02 AS a,VMX_DIOTCUENTAS AS b WHERE b.Cuenta =  a.VAT_GL_ACCT_ID AND b.Estado = 'True' AND a.ANIO_CONCILIACION = {1} AND a.MES_CONCILIACION = {2} GROUP BY a.BANK_ACCOUNT_ID,a.CONTROL_NO	,a.VAT_GL_ACCT_ID        HAVING CASE WHEN SUM(A.IVA_TRASLADO_MXN_FACT) = 0.01 THEN 0 WHEN SUM(A.IVA_TRASLADO_MXN_FACT) = -0.01 THEN 0 ELSE SUM(A.IVA_TRASLADO_MXN_FACT)END &lt; 0) GROUP BY a.BANK_ACCOUNT_ID,a.CONTROL_NO,a.VAT_GL_ACCT_ID,b.Descripcion,a.TC_FACTURA,b.Traslado EXCEPT /* Polizas Traspazadas */ SELECT BANK_ACCOUNT_ID ,CONTROL_NO , CUENTA,'','', '','', '' FROM  VMX_CONTOLPOLIZA_LINE WHERE TIPO_OPERACION = 'CXP'"/>
	  <add key="ConsultaCXP.conciliadosNegativos" value="SELECT A.BANK_ACCOUNT_ID AS Banco ,A.CONTROL_NO AS [No. Control] ,A.VAT_GL_ACCT_ID AS [Cuenta] ,B.DESCRIPCION AS Descripción ,B.TRASLADO AS [Cuenta Traslado] ,A.TC_FACTURA AS [Tipo Cambio],CASE WHEN SUM(A.IVA_TRASLADO_MXN_FACT) = 0.01 THEN 0 WHEN SUM(A.IVA_TRASLADO_MXN_FACT) = -0.01 THEN 0 ELSE SUM(A.IVA_TRASLADO_MXN_FACT)  END AS Monto FROM VMX_IVA_TRASL_CXP_02 AS a,VMX_DIOTCUENTAS AS b WHERE b.Cuenta =  a.VAT_GL_ACCT_ID  AND b.Estado = 'True' AND a.ANIO_CONCILIACION = {0} AND a.MES_CONCILIACION = {1} AND a.CONTROL_NO IN(SELECT a.CONTROL_NO FROM VMX_IVA_TRASL_CXP_02 AS a,VMX_DIOTCUENTAS AS b WHERE b.Cuenta =  a.VAT_GL_ACCT_ID AND b.Estado = 'True' AND a.ANIO_CONCILIACION = {0}	AND a.MES_CONCILIACION = {1} GROUP BY a.BANK_ACCOUNT_ID,a.CONTROL_NO	,a.VAT_GL_ACCT_ID        HAVING CASE WHEN SUM(A.IVA_TRASLADO_MXN_FACT) = 0.01 THEN 0 WHEN SUM(A.IVA_TRASLADO_MXN_FACT) = -0.01 THEN 0 ELSE SUM(A.IVA_TRASLADO_MXN_FACT)END &lt; 0) GROUP BY a.BANK_ACCOUNT_ID,a.CONTROL_NO,a.VAT_GL_ACCT_ID,b.Descripcion,a.TC_FACTURA,b.Traslado ORDER BY a.BANK_ACCOUNT_ID,a.CONTROL_NO"/>
	  <add key="ConsultaCXP.noConciliados" value="SELECT A.BANK_ACCOUNT_ID AS Banco ,A.CONTROL_NO AS [No. Control] ,A.VAT_GL_ACCT_ID AS [Cuenta] ,B.DESCRIPCION AS Descripción ,B.TRASLADO AS [Cuenta Traslado] ,A.TC_FACTURA AS [Tipo Cambio] ,CASE WHEN SUM(A.IVA_TRASLADO_MXN_FACT) = 0.01 THEN 0 WHEN SUM(A.IVA_TRASLADO_MXN_FACT) = -0.01 THEN 0 ELSE SUM(A.IVA_TRASLADO_MXN_FACT)  END AS Monto ,'{0}' AS Fecha FROM VMX_IVA_TRASL_CXP_02 AS a,VMX_DIOTCUENTAS AS b WHERE b.Cuenta =  a.VAT_GL_ACCT_ID  AND b.Estado = 'True'  AND a.ANIO_POSTEO = {1} AND a.MES_POSTEO = {2} AND a.CONTROL_NO NOT IN(SELECT a.CONTROL_NO FROM VMX_IVA_TRASL_CXP_02 AS a,VMX_DIOTCUENTAS AS b WHERE b.Cuenta =  a.VAT_GL_ACCT_ID AND b.Estado = 'True' AND a.ANIO_POSTEO = {1} AND a.MES_POSTEO = {2} GROUP BY a.BANK_ACCOUNT_ID,a.CONTROL_NO	,a.VAT_GL_ACCT_ID        HAVING CASE WHEN SUM(A.IVA_TRASLADO_MXN_FACT) = 0.01 THEN 0 WHEN SUM(A.IVA_TRASLADO_MXN_FACT) = -0.01 THEN 0 ELSE SUM(A.IVA_TRASLADO_MXN_FACT)END &lt; 0) GROUP BY a.BANK_ACCOUNT_ID,a.CONTROL_NO,a.VAT_GL_ACCT_ID,b.Descripcion,a.TC_FACTURA,b.Traslado EXCEPT /* Polizas Traspazadas */ SELECT BANK_ACCOUNT_ID ,CONTROL_NO , CUENTA,'','', '','', '' FROM  VMX_CONTOLPOLIZA_LINE WHERE TIPO_OPERACION = 'CXP'"/>
	  <add key="ConsultaCXP.noConciliadosNegativos" value="SELECT A.BANK_ACCOUNT_ID AS Banco ,A.CONTROL_NO AS [No. Control] ,A.VAT_GL_ACCT_ID AS [Cuenta] ,B.DESCRIPCION AS Descripción ,B.TRASLADO AS [Cuenta Traslado] ,A.TC_FACTURA AS [Tipo Cambio],CASE WHEN SUM(A.IVA_TRASLADO_MXN_FACT) = 0.01 THEN 0 WHEN SUM(A.IVA_TRASLADO_MXN_FACT) = -0.01 THEN 0 ELSE SUM(A.IVA_TRASLADO_MXN_FACT)  END AS Monto FROM VMX_IVA_TRASL_CXP_02 AS a,VMX_DIOTCUENTAS AS b WHERE b.Cuenta =  a.VAT_GL_ACCT_ID  AND b.Estado = 'True'  AND a.ANIO_POSTEO = {1} AND a.MES_POSTEO = {2} AND a.CONTROL_NO IN(SELECT a.CONTROL_NO FROM VMX_IVA_TRASL_CXP_02 AS a,VMX_DIOTCUENTAS AS b WHERE b.Cuenta =  a.VAT_GL_ACCT_ID AND b.Estado = 'True' AND a.ANIO_POSTEO = {1} AND a.MES_POSTEO = {2} GROUP BY a.BANK_ACCOUNT_ID,a.CONTROL_NO,a.VAT_GL_ACCT_ID HAVING CASE WHEN SUM(A.IVA_TRASLADO_MXN_FACT) = 0.01 THEN 0 WHEN SUM(A.IVA_TRASLADO_MXN_FACT) = -0.01 THEN 0 ELSE SUM(A.IVA_TRASLADO_MXN_FACT)END &lt; 0) GROUP BY a.BANK_ACCOUNT_ID,a.CONTROL_NO,a.VAT_GL_ACCT_ID,b.Descripcion,a.TC_FACTURA,b.Traslado ORDER BY a.BANK_ACCOUNT_ID"/>
	  <add key="ConsultaCXP.procesados" value="SELECT DISTINCT P.NO_TRANSACCION, PL.BANK_ACCOUNT_ID, PL.CONTROL_NO, PL.CUENTA, PL.DESCRIPCION, PL.CUENTA_TRASLADO, PL.MONTO, PL.IVA_DEPOSITO, PL.PERDIDA_GANACIA, P.FECHA_PERIODO FROM VMXCONTROLPOLIZA AS P JOIN VMX_CONTOLPOLIZA_LINE AS PL ON P.NO_TRANSACCION = PL.NO_TRANSACCION WHERE P.TIPO_OPERACION = 'CXP' AND P.NO_TRANSACCION IN({0}) ORDER BY PL.BANK_ACCOUNT_ID, PL.CONTROL_NO"/>
	  <add key="CuentaContable.obtenerDatosCuenta" value="SELECT ROWID, ENTITY_ID, INTERFACE_ID, GL_GROUP_ID, GL_ACCOUNT_ID FROM GL_INTERFACE_ACCT WHERE INTERFACE_ID = '{0}' AND ENTITY_ID = '{1}'"/>
	  <add key="CuentasPorCobrar.obtenerMovimientos" value="dbo.PRC_POLIZAS_POR_TRASPASAR_CXC"/>
	  <add key="CuentasPorPagar.obtenerMovimientos" value="dbo.PRC_POLIZAS_POR_TRASPASAR_CXP"/>
	  <add key="Detalles_Poliza.detalles.ConciliadoYCxC" value="SELECT CXC.BANK_ACCOUNT_ID,CXC.CHECK_ID, cxc.Cod_Cliente AS CUSTOMER_ID, CXC.VAT_AMOUNT ,CXC.IVA_MXN_TRASLADAR_FACT as MONTO ,CXC.VAT_GL_ACCT_ID AS CUENTA,IVACXC.Descripcion AS DESCRIPCION ,IVACXC.Traslado as CUENTA_TRASLADO, A.DESCRIPTION FROM VMX_IVA_CXC_02 AS CXC, VMX_IVACUENTASCXC AS IVACXC, ACCOUNT AS A WHERE IVACXC.Cuenta =  CXC.VAT_GL_ACCT_ID AND A.ID = IVACXC.Traslado AND IVACXC.Estado = 'True' AND CXC.Anio_Conc = {0} AND CXC.Mes_Conc = {1} AND  IVACXC.Traslado &lt;&gt; '' AND IVACXC.Traslado = '{2}' AND CXC.VAT_GL_ACCT_ID = '{3}' AND CXC.BANK_ACCOUNT_ID = '{4}' AND CXC.CHECK_ID = '{5}'"/>
	  <add key="Detalles_Poliza.detalles.ConciliadoYCxP" value="SELECT CXP.BANK_ACCOUNT_ID, CXP.CONTROL_NO, CXP.VAT_AMOUNT ,CXP.IVA_TRASLADO_MXN_FACT as MONTO, CXP.VAT_GL_ACCT_ID AS CUENTA ,DC.Descripcion AS DESCRIPCION, DC.Traslado as CUENTA_TRASLADO, A.DESCRIPTION FROM VMX_IVA_TRASL_CXP_02 AS CXP, VMX_DIOTCUENTAS AS DC, ACCOUNT AS A WHERE DC.Cuenta =  CXP.VAT_GL_ACCT_ID AND A.ID = DC.Traslado AND DC.Estado = 'True' AND CXP.ANIO_CONCILIACION = {0} AND CXP.MES_CONCILIACION = {1} AND DC.Traslado &lt;&gt; '' AND DC.Traslado = '{2}' AND CXP.VAT_GL_ACCT_ID = '{3}' AND CXP.BANK_ACCOUNT_ID = '{4}' AND CXP.CONTROL_NO= '{5}'"/>
	  <add key="Detalles_Poliza.detalles.NoConciliadoYCxP" value="SELECT CXP.BANK_ACCOUNT_ID, CXP.CONTROL_NO, CXP.VAT_AMOUNT ,CXP.IVA_TRASLADO_MXN_FACT as MONTO ,CXP.VAT_GL_ACCT_ID AS CUENTA, DC.Descripcion AS DESCRIPCION ,DC.Traslado as CUENTA_TRASLADO, A.DESCRIPTION FROM VMX_IVA_TRASL_CXP_02 AS CXP, VMX_DIOTCUENTAS AS DC, ACCOUNT AS A WHERE DC.Cuenta =  CXP.VAT_GL_ACCT_ID AND A.ID = DC.Traslado AND DC.Estado = 'True' AND CXP.ANIO_POSTEO = {0} AND CXP.MES_POSTEO = {1} AND  DC.Traslado &lt;&gt; '' AND DC.Traslado = '{2}' AND CXP.VAT_GL_ACCT_ID = '{3}' AND CXP.BANK_ACCOUNT_ID = '{4}' AND CXP.CONTROL_NO = '{5}'"/>
	  <add key="Detalles_Poliza.detalles.PorDefault" value="SELECT CXC.BANK_ACCOUNT_ID,CXC.CHECK_ID, cxc.Cod_Cliente AS CUSTOMER_ID, CXC.VAT_AMOUNT ,CXC.IVA_MXN_TRASLADAR_FACT as MONTO ,CXC.VAT_GL_ACCT_ID AS CUENTA,IVACXC.Descripcion AS DESCRIPCION ,IVACXC.Traslado as CUENTA_TRASLADO, A.DESCRIPTION FROM VMX_IVA_CXC_02 AS CXC,VMX_IVACUENTASCXC AS IVACXC,ACCOUNT AS A WHERE  IVACXC.Cuenta =  CXC.VAT_GL_ACCT_ID AND A.ID = IVACXC.Traslado AND IVACXC.Estado = 'True'  AND CXC.ANIO_POSTEO = {0} AND CXC.MES_POSTEO = {1} AND  IVACXC.Traslado &lt;&gt; '' AND IVACXC.Traslado = '{2}' AND CXC.VAT_GL_ACCT_ID = '{3}' AND CXC.BANK_ACCOUNT_ID = '{4}' AND CXC.CHECK_ID = '{5}'"/>
	  <add key="Detalles_Poliza.detalles_Mov_cabecera" value="SELECT NO_TRANSACCION ,MONTO  ,FECHA_PERIODO ,FECHA_CREACION ,USUARIO ,TIPO_OPERACION FROM VMXCONTROLPOLIZA WHERE TIPO_OPERACION = '{0}' AND NO_TRANSACCION = '{1}'"/>
	  <add key="Detalles_Poliza.detalles_Mov_linea" value="SELECT * FROM VMX_CONTOLPOLIZA_LINE WHERE TIPO_OPERACION = '{0}' AND NO_TRANSACCION = '{1}'"/>
	  <add key="Moneda.obtenerMonedasRasteables" value="SELECT ID, NAME, SHORT_NAME, TRACKING_CURRENCY FROM CURRENCY WHERE ID NOT IN(SELECT SYSTEM_CURRENCY_ID FROM APPLICATION_GLOBAL) AND TRACKING_CURRENCY = 'Y'"/>
	  <add key="Moneda.obtenerDatosMonetarios" value="SELECT TOP 1 ROWID, CURRENCY_ID, EFFECTIVE_DATE, SELL_RATE, BUY_RATE FROM CURRENCY_EXCHANGE WHERE CURRENCY_ID = '{0}' AND EFFECTIVE_DATE &lt;= CONVERT(DATETIME,'{1}',102) ORDER BY EFFECTIVE_DATE DESC"/>
	  <add key="PeriodoContable.obtenerPeriodosContables" value="SELECT ACCT_PERIOD, ACCT_YEAR, BEGIN_DATE, END_DATE FROM ACCOUNT_PERIOD WHERE ACCT_YEAR = {0}"/>
	  <add key="PolizaContable.agregarPoliza.GeneralJournal" value="INSERT GJ (ID, GJ_DATE, DESCRIPTION, POSTING_DATE, TOTAL_DR_AMOUNT, TOTAL_CR_AMOUNT, SELL_RATE, BUY_RATE, ENTITY_ID, CREATE_DATE,USER_ID, CURRENCY_ID, POST_ALL_TRACKING, POST_AS_NATIVE, USER_EXCH_RATE,POSTING_CANDIDATE) VALUES ('{0}','{1}','{2}','{3}',{4},{5},{6},{7},'{8}','{9}','{10}','{11}','{12}','{13}','{14}','{15}')"/>
	  <add key="PolizaContable.agregarPoliza.Currency" value="INSERT GJ_CURR (GJ_ID, CURRENCY_ID, AMOUNT, SELL_RATE, BUY_RATE) VALUES ('{0}', '{1}', {2}, {3}, {4})"/>
	  <add key="PolizaContable.agregarPoliza.ControlCTech" value="INSERT VMXCONTROLPOLIZA (NO_TRANSACCION, CUENTA,MONTO, FECHA_PERIODO, FECHA_TRANSACCION, FECHA_CREACION, USUARIO, TIPO_OPERACION) VALUES ('{0}','{1}','{2}','{3}','{4}','{5}','{6}','{7}')"/>
	  <add key="PolizaContable.agregarPoliza.CxC" value="INSERT GJ_DIST (GJ_ID, DIST_NO, ENTRY_NO, AMOUNT, AMOUNT_TYPE, GL_ACCOUNT_ID, NATIVE_AMOUNT, POSTING_DATE, POSTING_STATUS, CREATE_DATE, ENTITY_ID, CURRENCY_ID, NATIVE) VALUES ('{0}','{1}',{2},{3},'{4}','{5}',{6},'{7}','{8}','{9}','{10}','{11}','{12}')"/>
	  <add key="PolizaContable.agregarPoliza.CxP" value="INSERT GJ_LINE (GJ_ID, LINE_NO, GL_ACCOUNT_ID, DEBIT_AMOUNT, CREDIT_AMOUNT) VALUES ('{0}', {1}, '{2}', {3}, {4})"/>
	  <add key="PolizaContable.agregarPoliza.CashReceiptCxC" value="INSERT VMX_CONTOLPOLIZA_LINE (NO_TRANSACCION,BANK_ACCOUNT_ID, CHECK_ID,VAT_AMOUNT,SELL_RATE,MONTO,CUENTA,DESCRIPCION,CUENTA_TRASLADO,DESCRIPTION,TIPO_OPERACION,CUSTOMER_ID) VALUES ('{0}','{1}','{2}',{3},{4},{5},'{6}','{7}','{8}', (select top 1 descripcion from VMX_DIOTCUENTAS where Cuenta = '{9}'), '{10}','{11}')"/>
	  <add key="PolizaContable.agregarPoliza.CashDisbursementCxP" value="INSERT VMX_CONTOLPOLIZA_LINE (NO_TRANSACCION,BANK_ACCOUNT_ID, CONTROL_NO,VAT_AMOUNT,SELL_RATE,MONTO,CUENTA,DESCRIPCION,CUENTA_TRASLADO,DESCRIPTION,TIPO_OPERACION) VALUES ('{0}','{1}',{2},{3},{4},{5},'{6}','{7}','{8}', (select top 1 descripcion from VMX_DIOTCUENTAS where Cuenta = '{9}'),'{10}')"/>
	  <add key="PolizaContable.agregarPoliza.ActualizaNumeroPoliza" value="UPDATE NEXT_NUMBER_GEN SET NEXT_NUMBER = {0} WHERE TABLE_NAME = 'GJ' AND COLUMN_NAME = 'ID'"/>
	  <add key="TipoCambio.obtenerTipoCambio" value="SELECT TIPO FROM VMX_DIOT_TIPOCAMBIO"/>
	  <add key="TipoCambio.obtenerTipoCambio2" value="SELECT BANK_ACCOUNT_ID, CONTROL_NO, CURRENCY_ID, AMOUNT, SELL_RATE, BUY_RATE FROM CASH_DISBURSE_CURR WHERE BANK_ACCOUNT_ID = '{0}' AND CONTROL_NO = '{1}' AND CURRENCY_ID = '{2}'"/>
	  <add key="UtilImpuestos.cargar_cuentas.DIOTCUENTAS" value="SELECT VMX_DIOTCUENTAS.Estado,Cuenta,VMX_DIOTCUENTAS.Descripcion,VMX_DIOTCUENTAS.Percent_IVA,VMX_DIOTCUENTAS.Retencion,VMX_DIOTCUENTAS.Traslado FROM VAT INNER JOIN VMX_DIOTCUENTAS ON VAT.TAX_GL_ACCT_ID = VMX_DIOTCUENTAS.Cuenta"/>
	  <add key="UtilImpuestos.cargar_cuentas.IVACUENTASCXC" value="SELECT VMX_IVACUENTASCXC.Estado,Cuenta,VMX_IVACUENTASCXC.Descripcion,VMX_IVACUENTASCXC.Percent_IVA,VMX_IVACUENTASCXC.Retencion,VMX_IVACUENTASCXC.Traslado FROM VAT INNER JOIN VMX_IVACUENTASCXC ON VAT.TAX_GL_ACCT_ID = VMX_IVACUENTASCXC.Cuenta"/>
	  <add key="UtilImpuestos.guardar_cuentas.DIOTCUENTAS" value="DELETE VMX_DIOTCUENTAS"/>
	  <add key="UtilImpuestos.guardar_cuentas.IVACUENTASCXC" value="DELETE VMX_IVACUENTASCXC"/>
	  <add key="UtilImpuestos.guardar_cuentas.VMX_DIOTCUENTAS" value="INSERT INTO VMX_DIOTCUENTAS (Estado,Cuenta,Descripcion,Percent_IVA,Retencion,Traslado) VALUES ('{0}','{1}','{2}',{3},{4},'{5}')"/>
	  <add key="UtilImpuestos.guardar_cuentas.VMX_IVACUENTASCXC" value="INSERT INTO VMX_IVACUENTASCXC (Estado,Cuenta,Descripcion,Percent_IVA,Retencion,Traslado) VALUES ('{0}','{1}','{2}',{3},{4},'{5}')"/>
	  <add key="frmCatCuentas.dataGridView1_CellClick" value="SELECT ID as C\x00f3digo,DESCRIPTION  as Descripci\x00f3n  from ACCOUNT WHERE SUMMARY_ACCOUNT = 'N'"/>
	  <add key="frmCatCuentas.tsbBuscar_Click" value="SELECT TAX_GL_ACCT_ID AS CUENTA,(CODE + '/ '+ DESCRIPTION) AS DESCRIPCI\x00f3n,TAX_PERCENT AS [% IVA]  FROM VAT"/>
	  <add key="frmCDescuentos.button_Cuenta_Click" value="SELECT ID as Cuenta, DESCRIPTION AS Descripci\x00f3n FROM ACCOUNT"/>
	  <add key="frmCDescuentos.button_Guardar_Click.delDIOTCUENTASDESCUENTOS" value="DELETE VMX_DIOTCUENTASDESCUENTOS"/>
	  <add key="frmCDescuentos.button_Guardar_Click.delCUENTASDESCUENTOSCXC" value="DELETE VMX_CUENTASDESCUENTOSCXC"/>
	  <add key="frmCDescuentos.button_Guardar_Click.insDIOTCUENTASDESCUENTOS" value="INSERT INTO VMX_DIOTCUENTASDESCUENTOS (CUENTA) VALUES('{0}')"/>
	  <add key="frmCDescuentos.button_Guardar_Click.insCUENTASDESCUENTOSCXC" value="INSERT INTO VMX_CUENTASDESCUENTOSCXC (CUENTA) VALUES('{0}')"/>
	  <add key="frmCDescuentos.cargar_datos.DIOTCUENTASDESCUENTOS" value="SELECT CUENTA FROM VMX_DIOTCUENTASDESCUENTOS"/>
	  <add key="frmCDescuentos.cargar_datos.CUENTASDESCUENTOSCXC" value="SELECT CUENTA FROM VMX_CUENTASDESCUENTOSCXC"/>
	  <add key="frmPrincipal.button_Cargar_Click" value="SELECT DISTINCT NO_TRANSACCION FROM VMXCONTROLPOLIZA WHERE FECHA_PERIODO BETWEEN '{0}' AND '{1}' AND TIPO_OPERACION = '{2}'"/>
	  <add key="frmPrincipal.button_Cargar_Click.mostrarPoliza" value="SELECT DISTINCT GJL.GJ_ID AS ID,GJL.LINE_NO AS Linea,GJL.GL_ACCOUNT_ID AS Cuenta,(SELECT DESCRIPTION FROM ACCOUNT WHERE ID = GJL.GL_ACCOUNT_ID) AS Descripción,GJL.DEBIT_AMOUNT AS Debito,GJL.CREDIT_AMOUNT AS Credito FROM VMXCONTROLPOLIZA AS VM JOIN GJ_LINE AS GJL	ON VM.NO_TRANSACCION = GJL.GJ_ID WHERE VM.FECHA_PERIODO BETWEEN '{0}' AND '{1}' AND VM.TIPO_OPERACION = '{2}' ORDER BY GJL.ID,GJL.LINE_NO"/>
	  <add key="frmPrincipal.procesarTraspasos" value="SELECT CUENTA_ORIGEN, CUENTA_DESTINO, SUM(MONTO) AS MONTO, SUM(MONTO_IVA_DEPOSITO) AS MONTO_IVA_DEPOSITO FROM VMX_IVATRASTEMP GROUP BY CUENTA_ORIGEN,CUENTA_DESTINO"/>
	  <add key="frmPrincipal.procesarTraspasos.delIVATRASTEMP" value="DELETE VMX_IVATRASTEMP"/>
	  <add key="frmPrincipal.procesarTraspasos.insIVATRASTEMP" value="INSERT VMX_IVATRASTEMP(CUENTA_ORIGEN,CUENTA_DESTINO,MONTO,MONTO_IVA_DEPOSITO) VALUES('{0}','{1}',{2},{3})"/>
	  <add key="frmPrincipal.cargar_combos.Entity" value="SELECT ID FROM ENTITY"/>
	  <add key="frmPrincipal.cargar_combos.APPLICATION_GLOBAL" value="SELECT MFG_ENTITY_ID,SYSTEM_CURRENCY_ID FROM APPLICATION_GLOBAL WHERE MFG_ENTITY_ID = '{0}'"/>
    </querys>
  </customConfigurationSection>
</configuration>